{% extends "_base.html" %}

{% block title %}
  Things Organizer - Print report
{% endblock %}

{% block content %}
  {% if current_user.is_authenticated %}
    <div class="container">
      <div class="container m-3 pb-3">
        <h4 class="display-4">Generate report</h4>
        <h3 class="lead">You can generate and download as meny reports as you want, just select the options below and click on the <code>Generate</code> button.</h3>
      </div>
      <div>
          <form action="" method="post">
            {{ form.hidden_tag() }}
              <div class="form-group">
                {{ form.report_type.label }}
                {{ form.report_type(class_="form-control") }}
              </div>
              <div class="form-group">
                {{ form.data_type.label }}
                {{ form.data_type(class_="form-control") }}
              </div>
              <div class="form-group" id="category_div">
                {{ form.category.label }}
                {{ form.category(class_="form-control") }}
              </div>
              <div class="form-group" id="storage_div">
                {{ form.storage.label }}
                {{ form.storage(class_="form-control") }}
              </div>
              <div class="form-group row">
                <div class="col-sm-2">
                  <button type="submit" class="btn btn-primary btn-block">Generate</button>
                </div>
                <div class="col-sm-10">
                </div>
              </div>
          </form>
      </div>
    </div>
    <script type="text/javascript">
        document.querySelector('#category_div').style.display = 'none';
        document.querySelector('#storage_div').style.display = 'none';
        var el = document.getElementById("data_type");
        el.addEventListener("change", function() {
          var elems = document.querySelectorAll('#category_div,storage_div')
          for (var i = 0; i < elems.length; i++) {
            elems[i].style.display = 'none'
          }
          if (this.selectedIndex === 1) {
            document.querySelector('#category_div').style.display = 'block';
          } else if (this.selectedIndex === 2) {
            document.querySelector('#storage_div').style.display = 'block';
          } else {
            document.querySelector('#category_div').style.display = 'none';
            document.querySelector('#storage_div').style.display = 'none';
          }
        }, false);
    </script>
  {% endif %}
{% endblock %}